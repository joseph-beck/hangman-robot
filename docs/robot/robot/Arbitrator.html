<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (19) on Mon Mar 27 22:58:24 BST 2023 -->
<title>Arbitrator</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="dc.created" content="2023-03-27">
<meta name="description" content="declaration: package: robot, class: Arbitrator">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../script.js"></script>
<script type="text/javascript" src="../script-dir/jquery-3.6.0.min.js"></script>
<script type="text/javascript" src="../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var pathtoroot = "../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top"><button id="navbar-toggle-button" aria-controls="navbar-top" aria-expanded="false" aria-label="Toggle navigation links"><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span></button>
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/Arbitrator.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../index-files/index-1.html">Index</a></li>
<li><a href="../help-doc.html#class">Help</a></li>
</ul>
<ul class="sub-nav-list-small">
<li>
<p>Summary:</p>
<ul>
<li>Nested</li>
<li><a href="#field-summary">Field</a></li>
<li><a href="#constructor-summary">Constr</a></li>
<li><a href="#method-summary">Method</a></li>
</ul>
</li>
<li>
<p>Detail:</p>
<ul>
<li><a href="#field-detail">Field</a></li>
<li><a href="#constructor-detail">Constr</a></li>
<li><a href="#method-detail">Method</a></li>
</ul>
</li>
</ul>
</div>
<div class="sub-nav">
<div id="navbar-sub-list">
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field-summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor-summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li><a href="#field-detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor-detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><a href="../search.html">SEARCH</a>
<input type="text" id="search-input" disabled placeholder="Search">
<input type="reset" id="reset-button" disabled value="reset">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">robot</a></div>
<h1 title="Class Arbitrator" class="title">Class Arbitrator</h1>
</div>
<div class="inheritance" title="Inheritance Tree"><a href="https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">java.lang.Object</a>
<div class="inheritance">robot.Arbitrator</div>
</div>
<section class="class-description" id="class-description">
<hr>
<div class="type-signature"><span class="modifiers">public class </span><span class="element-name type-name-label">Arbitrator</span>
<span class="extends-implements">extends <a href="https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></span></div>
<div class="block">This is a variation of the standard lejos Arbitrator class (described in the
 next paragraph) that fixes a bug in the way Arbitrators instantiated with
 _returnWhenInactive=true behave. The bug is that the loop in Arbitrator that
 runs the highest priority action is configured to exit if there is no highest
 priority action currently set (and of course only if _returnWhenInactive is
 true). The only way the highest priority action can be set is in the Monitor
 thread. If the Monitor thread's own loop doesn't run after an action() is
 complete (when the parent thread sets the highest priority action to NONE)
 and before the loop exit condition is checked in the main thread, our
 arbitrator exits - even if there's actually an action() waiting to run which
 we would have known had the Monitor() thread run in time. I'm trying to solve
 this using Java's CountDownLatch to have the main thread wait for the monitor
 thread to finish at least one execution (@author - Abhinav Neelam)
 
 
 An Arbitrator object manages a behavior control system by starting and
 stopping individual behaviors <br>
 by the calling the <code>action()</code> and <code>suppress()</code> methods
 on them. <br>
 These Behavior objects are stored in an array, in order of increasing
 priority. <br>
 Arbitrator has three major responsibilities: <br>
 1. Determine the highest priority behavior among those that returns
 <b> true </b> to <code>takeControl() </code>. <br>
 2. Suppress the active behavior if its priority is less than highest
 priority. These two taska are performed the Arbitrator's internal Monitor
 thread.<br>
 3. When the <code>action()</code> method exits, call <code> action() </code>
 on the Behavior of highest priority. <br>
 This task is performed by the Arbitrator main thread. <br>
 The Arbitrator assumes that a Behavior is no longer active when
 <code>action()</code> exits, <br>
 therefore it will only call <code>suppress()</code> on the active Behavior
 i.e. whose <code>action()</code> method is running. <br>
 It can make consecutive calls of <code> action() </code>on the same Behavior.
 <br>
 Requirements for a Behavior: <br>
 When <code>suppress()</code> is called, terminate <code> action() </code>
 immediately. <br>
 When<code> action() </code>exits, the robot is in a safe state (e.g. motors
 stopped) <br>
 When the behavior should take control, the <code> takeControl() </code>
 should continue to return <b> true </b> <br>
 until its action starts. <br>
 After your code instantiates the Arbitrator, it should call
 <code>go() </code>to start it running. <br></div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><code>Behavior</code></li>
</ul>
</dd>
</dl>
</section>
<section class="summary">
<ul class="summary-list">
<!-- =========== FIELD SUMMARY =========== -->
<li>
<section class="field-summary" id="field-summary">
<h2>Field Summary</h2>
<div class="caption"><span>Fields</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Field</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code>boolean</code></div>
<div class="col-second even-row-color"><code><a href="#keepRunning" class="member-name-link">keepRunning</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
</div>
</section>
</li>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li>
<section class="constructor-summary" id="constructor-summary">
<h2>Constructor Summary</h2>
<div class="caption"><span>Constructors</span></div>
<div class="summary-table two-column-summary">
<div class="table-header col-first">Constructor</div>
<div class="table-header col-last">Description</div>
<div class="col-constructor-name even-row-color"><code><a href="#%3Cinit%3E(lejos.robotics.subsumption.Behavior%5B%5D)" class="member-name-link">Arbitrator</a><wbr>(lejos.robotics.subsumption.Behavior[]&nbsp;behaviorList)</code></div>
<div class="col-last even-row-color">
<div class="block">Same as Arbitrator(behaviorList, false) Arbitrator start() never exits</div>
</div>
<div class="col-constructor-name odd-row-color"><code><a href="#%3Cinit%3E(lejos.robotics.subsumption.Behavior%5B%5D,boolean)" class="member-name-link">Arbitrator</a><wbr>(lejos.robotics.subsumption.Behavior[]&nbsp;behaviorList,
 boolean&nbsp;returnWhenInactive)</code></div>
<div class="col-last odd-row-color">
<div class="block">Allocates an Arbitrator object and initializes it with an array of
 Behavior objects.</div>
</div>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab4" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab4', 3)" class="table-tab">Concrete Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel">
<div class="summary-table three-column-summary" aria-labelledby="method-summary-table-tab0">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#go()" class="member-name-link">go</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">This method starts the arbitration of Behaviors and runs an endless loop.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#stop()" class="member-name-link">stop</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.lang.Object">Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></h3>
<code><a href="https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/lang/Object.html#clone()" title="class or interface in java.lang" class="external-link">clone</a>, <a href="https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/lang/Object.html#equals(java.lang.Object)" title="class or interface in java.lang" class="external-link">equals</a>, <a href="https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/lang/Object.html#finalize()" title="class or interface in java.lang" class="external-link">finalize</a>, <a href="https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/lang/Object.html#getClass()" title="class or interface in java.lang" class="external-link">getClass</a>, <a href="https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/lang/Object.html#hashCode()" title="class or interface in java.lang" class="external-link">hashCode</a>, <a href="https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/lang/Object.html#notify()" title="class or interface in java.lang" class="external-link">notify</a>, <a href="https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/lang/Object.html#notifyAll()" title="class or interface in java.lang" class="external-link">notifyAll</a>, <a href="https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/lang/Object.html#toString()" title="class or interface in java.lang" class="external-link">toString</a>, <a href="https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/lang/Object.html#wait()" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/lang/Object.html#wait(long)" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/lang/Object.html#wait(long,int)" title="class or interface in java.lang" class="external-link">wait</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ============ FIELD DETAIL =========== -->
<li>
<section class="field-details" id="field-detail">
<h2>Field Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="keepRunning">
<h3>keepRunning</h3>
<div class="member-signature"><span class="modifiers">public volatile</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">keepRunning</span></div>
</section>
</li>
</ul>
</section>
</li>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li>
<section class="constructor-details" id="constructor-detail">
<h2>Constructor Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="&lt;init&gt;(lejos.robotics.subsumption.Behavior[],boolean)">
<h3>Arbitrator</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="element-name">Arbitrator</span><wbr><span class="parameters">(lejos.robotics.subsumption.Behavior[]&nbsp;behaviorList,
 boolean&nbsp;returnWhenInactive)</span></div>
<div class="block">Allocates an Arbitrator object and initializes it with an array of
 Behavior objects. The index of a behavior in this array is its priority
 level, so the behavior of the largest index has the highest the priority
 level. The behaviors in an Arbitrator can not be changed once the
 arbitrator is initialized.<BR>
 <B>NOTE:</B> Once the Arbitrator is initialized, the method go() must be
 called to begin the arbitration.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>behaviorList</code> - an array of Behavior objects.</dd>
<dd><code>returnWhenInactive</code> - if <B>true</B>, the <B>go()</B> method returns when no
            Behavior is active.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="&lt;init&gt;(lejos.robotics.subsumption.Behavior[])">
<h3>Arbitrator</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="element-name">Arbitrator</span><wbr><span class="parameters">(lejos.robotics.subsumption.Behavior[]&nbsp;behaviorList)</span></div>
<div class="block">Same as Arbitrator(behaviorList, false) Arbitrator start() never exits</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>behaviorList</code> - An array of Behavior objects.</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="go()">
<h3>go</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">go</span>()</div>
<div class="block">This method starts the arbitration of Behaviors and runs an endless loop.
 <BR>
 Note: Arbitrator does not run in a separate thread. The go() method will
 not return unless <br>
 1. <code> no action() </code>method is running and <br>
 2. no behavior <code> takeControl() </code> returns <B> true </B> and
 <br>
 3. the <B>returnWhenInacative </B> flag is true,</div>
</section>
</li>
<li>
<section class="detail" id="stop()">
<h3>stop</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">stop</span>()</div>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
</div>
</div>
</body>
</html>
